<% layout("/layouts/boilerplate") -%>
<br><br>

<div class="main-body-page bg-light p-2" style="border-radius: 6px;">

    <div class="d-flex gap-2 cols m-1">
        <!-- "Edit Member" Heading-->
        <div class="col-7">
            <p class="new-form-heading">Edit Member</p>
        </div>
        <!-- "<Back" Button-->
        <div class="col-6">
            <a href="/user/members" style="color: #021e2b;" class="col-12 btn"> <i class="fa-solid fa-chevron-left"></i> Back </a>
        </div>
    </div>
    <hr>

    <div class="container student-box">
        <!-- Form starts here -->
        <form method="POST" action="/user/member-edit/<%=allMembers._id%>?_method=PUT" class="row g-4 needs-validation" enctype="application/x-www-form-urlencoded">

            <div class="col-md-4">
                <label for="name" class="form-label">Name</label>
                <input type="text" id="name" name="member[name]" class="form-control" value="<%= allMembers.name %>" required>
            </div>

            <div class="col-md-4">
                <label for="fatherName" class="form-label">Father's Name</label>
                <input type="text" id="fatherName" name="member[fatherName]" class="form-control" value="<%= allMembers.fatherName %>" required>
            </div>

            <div class="col-md-4">
                <label for="mobileNo" class="form-label">Mobile No.</label>
                <input type="number" id="mobileNo" name="member[mobileNo]" class="form-control" value="<%= allMembers.mobileNo %>" required>
            </div>

            <div class="col-md-4">
                <label for="aadharNo" class="form-label">Aadhar No.</label>
                <input type="number" id="aadharNo" name="member[aadharNo]" class="form-control" value="<%= allMembers.aadharNo %>" required>
            </div>

            <div class="col-md-6">
                <label for="address" class="form-label">Address</label>
                <input type="text" id="address" name="member[address]" class="form-control" value="<%= allMembers.address %>" required>
            </div>
<!-- 
            <div class="col-md-4">
                <label for="joiningDate" class="form-label">Joining Date</label>
                <input type="date" id="joiningDate" name="member[joiningDate]" class="form-control" 
                    value="<%= allMembers.joiningDate ? allMembers.joiningDate.toISOString().split('T')[0] : '' %>" required>
            </div> -->

            <!-- <div class="col-md-4">
                <label for="assignedRoom_id" class="form-label">Assigned Room</label>
                <select id="assignedRoom_id" name="member[assignedRoom_id]" class="form-select" required>
                    <option value="" disabled>Select Room To Assign</option>
                    <% rooms.forEach(room => { %>
                        <option value="<%= room._id %>"
                            <%= room._id.toString() === allMembers.assignedRoom_id.toString() ? 'selected' : '' %>>
                            <%= room.room_number %> &nbsp;&nbsp;&nbsp;/ Fees: <i class="fa-solid fa-indian-rupee-sign"></i><%= room.room_fees %>
                        </option>
                    <% }) %>
                </select>
            </div> -->

            <div class="col-md-4">
                <label for="profession" class="form-label">Profession</label>
                <select id="profession" name="member[profession]" class="form-select" required>
                    <option value="Student" <%= allMembers.profession === 'Student' ? 'selected' : '' %>>Student</option>
                    <option value="Employee" <%= allMembers.profession === 'Employee' ? 'selected' : '' %>>Employee</option>
                    <option value="Business" <%= allMembers.profession === 'Business' ? 'selected' : '' %>>Business</option>
                    <option value="Other" <%= allMembers.profession === 'Other' ? 'selected' : '' %>>Other</option>
                </select>
            </div>

            <div class="col-12 d-flex justify-content-center">
                <button type="submit" class="col-6 btn btn-info">Update Member</button>
            </div>
        </form>
    </div>
</div>
